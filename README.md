<div align="center">
  <img width="390px" src="https://raw.githubusercontent.com/JuliaPerf/LIKWID.jl/main/docs/src/assets/logo_with_txt_white_border.png">
</div>

<br>

[![](https://img.shields.io/badge/docs-dev-blue.svg)](https://juliaperf.github.io/LIKWID.jl/dev/)
[![Build Status](https://github.com/JuliaPerf/LIKWID.jl/workflows/CI/badge.svg)](https://github.com/JuliaPerf/LIKWID.jl/actions)
[![Build Status](https://gitlab.rrze.fau.de/ub55yzis/LIKWID.jl/badges/main/pipeline.svg?key_text=NHR@FAU&key_width=70)](https://gitlab.rrze.fau.de/ub55yzis/LIKWID.jl/-/pipelines)
[![codecov](https://codecov.io/gh/JuliaPerf/LIKWID.jl/branch/main/graph/badge.svg?token=Ze61CbGoO5)](https://codecov.io/gh/JuliaPerf/LIKWID.jl)
![lifecycle](https://img.shields.io/badge/lifecycle-maturing-blue.svg)

*Like I Knew What I am Doing*

LIKWID.jl is a Julia wrapper for the performance monitoring and benchmarking suite [LIKWID](https://github.com/RRZE-HPC/likwid).

## Installation

Prerequisites:
* You must have `likwid` installed (see the [build & install instructions](https://github.com/RRZE-HPC/likwid#download-build-and-install)).
* **You must be running Linux.** (LIKWID doesn't support macOS or Windows.)

LIKWID.jl is a registered Julia package. Hence, you can simply add it to your Julia environment with the command
```julia
] add LIKWID
```

## Documentation

Please check out [the documentation](https://juliaperf.github.io/LIKWID.jl/dev/) to learn how to use LIKWID.jl.

## Example: Performance Monitoring

```julia
using LIKWID

const N = 10_000
const a = 3.141
const x = rand(Float32, N)
const y = rand(Float32, N)
const z = zeros(Float32, N)

function saxpy!(z, a, x, y)
    z .= a .* x .+ y
end
saxpy!(z, a, x, y); # warmup

metrics, events = @perfmon "FLOPS_SP" saxpy!(z, a, x, y); # single-precision floating point ops.

NFLOPs = Int(first(events["FLOPS_SP"])["RETIRED_SSE_AVX_FLOPS_ALL"]) # number of FLOPs
println("Number of performed FLOPs: ", NFLOPs)
```

Output:
```
Group: FLOPS_SP
┌───────────────────────────┬──────────┐
│                     Event │ Thread 1 │
├───────────────────────────┼──────────┤
│          ACTUAL_CPU_CLOCK │  70451.0 │
│             MAX_CPU_CLOCK │  61691.0 │
│      RETIRED_INSTRUCTIONS │  20140.0 │
│       CPU_CLOCKS_UNHALTED │  25047.0 │
│ RETIRED_SSE_AVX_FLOPS_ALL │  20000.0 │
│                     MERGE │      0.0 │
└───────────────────────────┴──────────┘
┌──────────────────────┬────────────┐
│               Metric │   Thread 1 │
├──────────────────────┼────────────┤
│  Runtime (RDTSC) [s] │ 7.67072e-6 │
│ Runtime unhalted [s] │ 2.87574e-5 │
│          Clock [MHz] │    2797.71 │
│                  CPI │    1.24364 │
│         SP [MFLOP/s] │    2607.32 │
└──────────────────────┴────────────┘

Number of performed FLOPs: 20000.0
```

## Resources

* [LIKWID](https://github.com/RRZE-HPC/likwid) / [LIKWID Performance Tools](https://hpc.fau.de/research/tools/likwid/)
* Most C-bindings have been autogenerated using [Clang.jl](https://github.com/JuliaInterop/Clang.jl)
* [pylikwid](https://github.com/RRZE-HPC/pylikwid): Python wrappers of LIKWID
* Logo by @davibarreira
* The [Erlangen National High Performance Computing Center (NHR@FAU)](https://hpc.fau.de/) supports the project with [CI infrastructure](https://gitlab.rrze.fau.de/ub55yzis/LIKWID.jl/-/pipelines)

## Creators

LIKWID.jl is an effort by the [Paderborn Center for Parallel Computing (PC²)](https://pc2.uni-paderborn.de) within the german, national HPC initiative [NHR](https://www.nhr-gs.de/) and the [MIT JuliaLab](https://julia.mit.edu/).
